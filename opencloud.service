[Unit]
Description=Opencloud server daemon
After=syslog.target network.target

[Service]
User=oceu
Group=oceu
Type=simple
Environment=OC_BASE_DATA_PATH=/var/lib/opencloud
Environment=OC_CONFIG_DIR=/etc/opencloud
EnvironmentFile=/etc/opencloud/opencloud.env
ExecStart=/usr/bin/opencloud-server server
WorkingDirectory=/var/lib/opencloud

# Sandboxing
#ProtectProc=invisible
#ProtectSystem=strict
ReadWritePaths=/var/lib/opencloud
ProtectHome=yes
PrivateTmp=yes
#PrivateDevices=yes
#PrivateIPC=yes
#PrivateUsers=yes
#ProtectHostname=yes
#ProtectClock=yes
#ProtectKernelTunables=yes
#ProtectKernelModules=yes
#ProtectKernelLogs=yes
#ProtectControlGroups=yes
#RestrictNamespaces=yes
#LockPersonality=yes
#RestrictSUIDSGID=yes
#RemoveIPC=yes
#NoNewPrivileges=yes
SystemCallArchitectures=native

TimeoutStopSec=120
Restart=on-failure

[Install]
WantedBy=multi-user.target
